### 第一步 HTML 解析
#### 总结
* 为了方便文件管理，我们把 parser 单独拆到文件中
* parser 接受HTML文本做为参数，返回一颗DOM树


### 第二步 定义转态机
#### 总结
* 利用 FSM 来实现HTML分析
* 在HTML标准中，已经规定了 HTML 状态
* Toy-Browser 只会挑选其中的一部分，完成一个简易版本

### 第三步 解析标签
1. 开始标签
2. 结束标签
3. 自封闭标签

### 第四步 常见元素
1. 在状态机中，除了状态迁移，还要加入业务逻辑（处理 token）
2. 在标签结束状态提交 标签token

### 第五步 处理属性
1. 属性值分为 单引号、双引号、无引号三种写法，因此需要较多的处理状态
2. 处理属性的方式 和 标签类似
3. 属性结束时，把属性添加到 标签token 上

### 第六步
1. 从标签构建 DOM 树的基本技巧是使用 栈
2. 遇到开始标签时创建元素并入栈，遇到结束标签是出栈
3. 自封闭节点可视为入栈后立即出栈
4. 任何元素的父元素是他入栈前的栈顶元素

### 第七步
1. 文本节点与自封闭标签处理类似
2. 多个文本节点需要合并


## CSS 计算
### 第一步 收集 CSS 规则
1. 遇到 style 标签时，把 CSS 规则保存起来
2. 这里调用 css(npm 包) 来解析 CSS 规则
3. 这里必须仔细研究此库分析 CSS 规则的格式

### 第二步 添加调用
1. 创建一个元素的后，立即计算 CSS
2. 理论上，当我们分析一个元素时，所有的 CSS 规则已经收集完毕
3. 在真实的浏览器环境中，style 标签可能写在 body 标签中，还是需要重新计算 CSS（这里忽略）

### 第三步 获取父元素序列
1. 在 computeCSS 函数中，我们必须知道元素的所有父元素才能判断元素与规则是否匹配
2. 从上一步的 stack 可以获取本元素的所有父元素
3. 因为首先获取的是 ‘当前元素’，所以获得和计算父元素匹配的顺序是由内向外的
